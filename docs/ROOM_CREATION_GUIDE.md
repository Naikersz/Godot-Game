# –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–æ–º–Ω–∞—Ç-–ø—Ä–µ—Ñ–∞–±–æ–≤ –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–∑–µ–º–µ–ª–∏–π

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–µ—Ñ–∞–±—ã –∫–æ–º–Ω–∞—Ç, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–∑–µ–º–µ–ª–∏–π.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
- `scenes/rooms/room_types/` - –¢–∏–ø—ã –∫–æ–º–Ω–∞—Ç (start, boss, treasure)
- `scenes/rooms/room_variants/` - –í–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—ã—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
- –†–∞–∑–º–µ—Ä —Ç–∞–π–ª–∞: **64x64 –ø–∏–∫—Å–µ–ª–µ–π**
- Tileset: `res://art/tilesets/Tilesett.tres`

---

## üéØ –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è

### 1.1 –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 10x10 —Ç–∞–π–ª–æ–≤ (640x640 –ø–∏–∫—Å–µ–ª–µ–π)
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 15x15 —Ç–∞–π–ª–æ–≤ (960x960 –ø–∏–∫—Å–µ–ª–µ–π)
- **–ë–æ–ª—å—à–∞—è –∫–æ–º–Ω–∞—Ç–∞:** 20x20 —Ç–∞–π–ª–æ–≤ (1280x1280 –ø–∏–∫—Å–µ–ª–µ–π)

**–í–∞–∂–Ω–æ:** –í—Å–µ –∫–æ–º–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –∏–ª–∏ –∫—Ä–∞—Ç–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

### 1.2 –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–≤–µ—Ä–µ–π

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤—ã—Ö–æ–¥—ã (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∞ –∫–æ–º–Ω–∞—Ç—ã):**
- **North (–°–µ–≤–µ—Ä):** `Vector2(room_width/2, 0)` - –≤–µ—Ä—Ö–Ω—è—è —Å—Ç–æ—Ä–æ–Ω–∞
- **South (–Æ–≥):** `Vector2(room_width/2, room_height)` - –Ω–∏–∂–Ω—è—è —Å—Ç–æ—Ä–æ–Ω–∞
- **East (–í–æ—Å—Ç–æ–∫):** `Vector2(room_width, room_height/2)` - –ø—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞
- **West (–ó–∞–ø–∞–¥):** `Vector2(0, room_height/2)` - –ª–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞

**–®–∏—Ä–∏–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∞:** 3-5 —Ç–∞–π–ª–æ–≤ (192-320 –ø–∏–∫—Å–µ–ª–µ–π)

---

## üèóÔ∏è –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–Ω–∞—Ç—ã

### 2.1 –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ü–µ–Ω—É

1. –í Godot Editor: **Scene ‚Üí New Scene**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª: **Node2D** (–Ω–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ `NormalRoom` –∏–ª–∏ `StartRoom` –∏ —Ç.–¥.)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤: `scenes/rooms/room_types/start_room.tscn` (–∏–ª–∏ `room_variants/normal_room_1.tscn`)

### 2.2 –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∑–ª–æ–≤

```
RoomName (Node2D)                    # –ö–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª
‚îú‚îÄ‚îÄ RoomArea (Area2D)                # –û–±–ª–∞—Å—Ç—å –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ CollisionShape2D             # –§–æ—Ä–º–∞ –æ–±–ª–∞—Å—Ç–∏ –∫–æ–º–Ω–∞—Ç—ã
‚îú‚îÄ‚îÄ Floor (TileMap)                  # –ü–æ–ª –∫–æ–º–Ω–∞—Ç—ã
‚îú‚îÄ‚îÄ Walls (TileMap)                  # –°—Ç–µ–Ω—ã –∫–æ–º–Ω–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π)
‚îú‚îÄ‚îÄ Decorations (TileMap)            # –î–µ–∫–æ—Ä–∞—Ü–∏–∏ (–∫–∞–º–Ω–∏, —Å—Ç–æ–ª–±—ã –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ SpawnPoints (Node2D)             # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–æ—á–µ–∫ —Å–ø–∞–≤–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ SpawnPoint1 (Marker2D)      # –¢–æ—á–∫–∞ —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–∞ 1
‚îÇ   ‚îú‚îÄ‚îÄ SpawnPoint2 (Marker2D)       # –¢–æ—á–∫–∞ —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–∞ 2
‚îÇ   ‚îî‚îÄ‚îÄ ...                          # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏
‚îú‚îÄ‚îÄ Doors (Node2D)                   # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—ã—Ö–æ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ DoorNorth (Area2D)           # –í—ã—Ö–æ–¥ –Ω–∞ —Å–µ–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CollisionShape2D
‚îÇ   ‚îú‚îÄ‚îÄ DoorSouth (Area2D)           # –í—ã—Ö–æ–¥ –Ω–∞ —é–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CollisionShape2D
‚îÇ   ‚îú‚îÄ‚îÄ DoorEast (Area2D)            # –í—ã—Ö–æ–¥ –Ω–∞ –≤–æ—Å—Ç–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CollisionShape2D
‚îÇ   ‚îî‚îÄ‚îÄ DoorWest (Area2D)            # –í—ã—Ö–æ–¥ –Ω–∞ –∑–∞–ø–∞–¥
‚îÇ       ‚îî‚îÄ‚îÄ CollisionShape2D
‚îî‚îÄ‚îÄ RoomData (Node)                  # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã (—Å–∫—Ä–∏–ø—Ç)
```

---

## üé® –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TileMap –¥–ª—è –ø–æ–ª–∞

### 3.1 –î–æ–±–∞–≤—å—Ç–µ TileMap —É–∑–µ–ª

1. –î–æ–±–∞–≤—å—Ç–µ **TileMap** –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª –∫–æ—Ä–Ω—è
2. –ù–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ `Floor`
3. –í Inspector:
   - **Tile Set:** `res://art/tilesets/Tilesett.tres`
   - **Cell Size:** `64, 64` (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –≤ tileset —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

### 3.2 –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª –∫–æ–º–Ω–∞—Ç—ã

1. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–π –ø–æ–ª–∞ –≤ TileSet
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç **Paint Tool** (–∫–∏—Å—Ç—å)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å –∫–æ–º–Ω–∞—Ç—ã —Ç–∞–π–ª–∞–º–∏ –ø–æ–ª–∞
4. **–í–∞–∂–Ω–æ:** –û—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ—Ö–æ–¥—ã –¥–ª—è –¥–≤–µ—Ä–µ–π (3-5 —Ç–∞–π–ª–æ–≤ —à–∏—Ä–∏–Ω–æ–π)

### 3.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–ª–æ–∏ TileMap (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏:
- **Layer 0:** –ü–æ–ª
- **Layer 1:** –°—Ç–µ–Ω—ã
- **Layer 2:** –î–µ–∫–æ—Ä–∞—Ü–∏–∏

–í Inspector TileMap:
- –î–æ–±–∞–≤—å—Ç–µ —Å–ª–æ–∏ —á–µ—Ä–µ–∑ **Layers ‚Üí Add Layer**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **Z Index** –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üö™ –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–≤–µ—Ä–µ–π/–≤—ã—Ö–æ–¥–æ–≤

### 4.1 –°–æ–∑–¥–∞–π—Ç–µ Area2D –¥–ª—è –∫–∞–∂–¥–æ–π –¥–≤–µ—Ä–∏

1. –î–æ–±–∞–≤—å—Ç–µ **Area2D** –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª `Doors`
2. –ù–∞–∑–æ–≤–∏—Ç–µ `DoorNorth`, `DoorSouth`, `DoorEast`, `DoorWest`
3. –î–ª—è –∫–∞–∂–¥–æ–π –¥–≤–µ—Ä–∏:
   - –î–æ–±–∞–≤—å—Ç–µ **CollisionShape2D** –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª
   - –°–æ–∑–¥–∞–π—Ç–µ **RectangleShape2D**:
     - **Size:** `192, 64` (3 —Ç–∞–π–ª–∞ —à–∏—Ä–∏–Ω–æ–π, 1 —Ç–∞–π–ª –≤—ã—Å–æ—Ç–æ–π)
   - –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–π—Ç–µ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (—Å–º. –®–∞–≥ 1.2)

### 4.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã –¥–≤–µ—Ä–µ–π

–í —Å–∫—Ä–∏–ø—Ç–µ –∫–æ–º–Ω–∞—Ç—ã (—Å–º. –®–∞–≥ 6) –ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–∏–≥–Ω–∞–ª—ã:
```gdscript
door_north.body_entered.connect(_on_door_entered.bind("north"))
door_south.body_entered.connect(_on_door_entered.bind("south"))
door_east.body_entered.connect(_on_door_entered.bind("east"))
door_west.body_entered.connect(_on_door_entered.bind("west"))
```

### 4.3 –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤–µ—Ä–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –¥–≤–µ—Ä–µ–π:
- –î–æ–±–∞–≤—å—Ç–µ **Sprite2D** –∏–ª–∏ **AnimatedSprite2D** –¥–ª—è –∫–∞–∂–¥–æ–π –¥–≤–µ—Ä–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø—Ä–∞–π—Ç –¥–≤–µ—Ä–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ü–≤–µ—Ç–Ω–æ–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üëæ –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—á–µ–∫ —Å–ø–∞–≤–Ω–∞

### 5.1 –î–æ–±–∞–≤—å—Ç–µ Marker2D —É–∑–ª—ã

1. –î–æ–±–∞–≤—å—Ç–µ **Marker2D** –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª `SpawnPoints`
2. –ù–∞–∑–æ–≤–∏—Ç–µ `SpawnPoint1`, `SpawnPoint2` –∏ —Ç.–¥.
3. –†–∞—Å–ø–æ–ª–æ–∂–∏—Ç–µ –∏—Ö –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∫–æ–º–Ω–∞—Ç—ã (–∏–∑–±–µ–≥–∞–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞ –∏ –¥–≤–µ—Ä–µ–π)

### 5.2 –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ–∑–∏—Ü–∏–∏

- –£–≥–ª—ã –∫–æ–º–Ω–∞—Ç—ã
- –í–¥–æ–ª—å —Å—Ç–µ–Ω (–Ω–µ —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –¥–≤–µ—Ä—è–º)
- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (–¥–ª—è –±–æ—Å—Å–æ–≤)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –¥–≤–µ—Ä–µ–π:** 3-4 —Ç–∞–π–ª–∞

---

## üìù –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ RoomData

### 6.1 –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

1. –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç: `scripts/room_data.gd`
2. –ü—Ä–∏—Å–≤–æ–π—Ç–µ –µ–≥–æ —É–∑–ª—É `RoomData` –≤ —Å—Ü–µ–Ω–µ –∫–æ–º–Ω–∞—Ç—ã

### 6.2 –ë–∞–∑–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç RoomData

```gdscript
extends Node

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–∑–µ–º–µ–ª–∏–π

@export var room_type: String = "normal"  # "start", "normal", "boss", "treasure"
@export var room_size: Vector2i = Vector2i(15, 15)  # –†–∞–∑–º–µ—Ä –≤ —Ç–∞–π–ª–∞—Ö
@export var connections: Array[String] = []  # ["north", "south", "east", "west"]
@export var spawn_count: int = 3  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–æ–≤
@export var difficulty: int = 1  # –°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–Ω–∞—Ç—ã (1-10)

# –°—Å—ã–ª–∫–∏ –Ω–∞ —É–∑–ª—ã –∫–æ–º–Ω–∞—Ç—ã
@onready var floor_tilemap: TileMap = $Floor
@onready var spawn_points: Node2D = $SpawnPoints
@onready var doors: Node2D = $Doors

func get_spawn_positions() -> Array[Vector2]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Å–ø–∞–≤–Ω–∞ –≤—Ä–∞–≥–æ–≤"""
    var positions: Array[Vector2] = []
    for child in spawn_points.get_children():
        if child is Marker2D:
            positions.append(child.global_position)
    return positions

func get_door_position(direction: String) -> Vector2:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –¥–≤–µ—Ä–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é"""
    var door = doors.get_node_or_null("Door" + direction.capitalize())
    if door:
        return door.global_position
    return Vector2.ZERO

func has_connection(direction: String) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤—ã—Ö–æ–¥ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏"""
    return direction in connections
```

---

## üéØ –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RoomArea (Area2D)

### 7.1 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–±–ª–∞—Å—Ç—å –∫–æ–º–Ω–∞—Ç—ã

1. –í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª `RoomArea` (Area2D)
2. –î–æ–±–∞–≤—å—Ç–µ **CollisionShape2D**
3. –°–æ–∑–¥–∞–π—Ç–µ **RectangleShape2D**:
   - **Size:** –†–∞–∑–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã –≤ –ø–∏–∫—Å–µ–ª—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `960, 960` –¥–ª—è 15x15 —Ç–∞–π–ª–æ–≤)
4. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–π—Ç–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –∫–æ–º–Ω–∞—Ç—ã

### 7.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏–≥–Ω–∞–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í —Å–∫—Ä–∏–ø—Ç–µ –∫–æ–º–Ω–∞—Ç—ã –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å:
```gdscript
room_area.body_entered.connect(_on_player_entered)
room_area.body_exited.connect(_on_player_exited)
```

---

## üîß –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ —Å–≤–æ–π—Å—Ç–≤

### 8.1 –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

–í —Å–∫—Ä–∏–ø—Ç–µ `RoomData` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@export` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:
- `room_type` - —Ç–∏–ø –∫–æ–º–Ω–∞—Ç—ã
- `connections` - –º–∞—Å—Å–∏–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—ã—Ö–æ–¥–æ–≤
- `spawn_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–∞–≥–æ–≤
- `difficulty` - —Å–ª–æ–∂–Ω–æ—Å—Ç—å

### 8.2 –ì—Ä—É–ø–ø—ã —Å—Ü–µ–Ω

1. –í Inspector –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —É–∑–ª–∞ –∫–æ–º–Ω–∞—Ç—ã
2. –î–æ–±–∞–≤—å—Ç–µ –≤ **Groups:** `rooms`
3. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ª–µ–≥–∫–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã –≤ —Å—Ü–µ–Ω–µ

---

## ‚úÖ –®–∞–≥ 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

### 9.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω—É –∫–æ–º–Ω–∞—Ç—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –ü–æ–ª –∑–∞–ø–æ–ª–Ω–µ–Ω —Ç–∞–π–ª–∞–º–∏
   - –î–≤–µ—Ä–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –¢–æ—á–∫–∏ —Å–ø–∞–≤–Ω–∞ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –¥–≤–µ—Ä—è–º–∏
   - RoomArea –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –∫–æ–º–Ω–∞—Ç—É

### 9.2 –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ü–µ–Ω–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ü–µ–Ω—É: `scenes/test_room.tscn`
2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–Ω–∞—Ç—É –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª
3. –î–æ–±–∞–≤—å—Ç–µ –∏–≥—Ä–æ–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–ª–ª–∏–∑–∏–π
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

---

## üì¶ –®–∞–≥ 10: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∫–æ–º–Ω–∞—Ç

### 10.1 –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

–î–ª—è `normal_room` —Å–æ–∑–¥–∞–π—Ç–µ:
- `normal_room_1.tscn` - –±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- `normal_room_2.tscn` - –≤–∞—Ä–∏–∞–Ω—Ç —Å –¥–µ–∫–æ—Ä–∞—Ü–∏—è–º–∏
- `normal_room_3.tscn` - –≤–∞—Ä–∏–∞–Ω—Ç —Å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏

### 10.2 –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É `base_room.tscn`
2. –î–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: **Scene ‚Üí Change Scene Type ‚Üí Inherit**
3. –í—ã–±–µ—Ä–∏—Ç–µ `base_room.tscn`
4. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —á–∞—Å—Ç–∏

---

## üéÆ –®–∞–≥ 11: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º

### 11.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

–í —Å–∫—Ä–∏–ø—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ (`dungeon_manager.gd`):

```gdscript
const ROOM_SCENES = {
    "start": preload("res://scenes/rooms/room_types/start_room.tscn"),
    "normal": [
        preload("res://scenes/rooms/room_variants/normal_room_1.tscn"),
        preload("res://scenes/rooms/room_variants/normal_room_2.tscn"),
        preload("res://scenes/rooms/room_variants/normal_room_3.tscn"),
    ],
    "boss": preload("res://scenes/rooms/room_types/boss_room.tscn"),
    "treasure": preload("res://scenes/rooms/room_types/treasure_room.tscn"),
}

func get_room_scene(type: String, variant: int = -1) -> PackedScene:
    if type == "normal":
        var variants = ROOM_SCENES["normal"]
        if variant == -1:
            variant = randi() % variants.size()
        return variants[variant]
    return ROOM_SCENES.get(type, null)
```

### 11.2 –ò–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

```gdscript
func instantiate_room(room_data: Dictionary, position: Vector2) -> Node2D:
    var room_scene = get_room_scene(room_data.type, room_data.variant)
    var room_instance = room_scene.instantiate()
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
    room_instance.position = position
    
    # –ü–æ–ª—É—á–∞–µ–º RoomData –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    var room_data_node = room_instance.get_node_or_null("RoomData")
    if room_data_node:
        room_data_node.connections = room_data.connections
    
    return room_instance
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã

- [ ] –°–æ–∑–¥–∞–Ω–∞ —Å—Ü–µ–Ω–∞ —Å Node2D –∫–∞–∫ –∫–æ—Ä–Ω–µ–º
- [ ] –î–æ–±–∞–≤–ª–µ–Ω TileMap –¥–ª—è –ø–æ–ª–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Tileset
- [ ] –ü–æ–ª –∑–∞–ø–æ–ª–Ω–µ–Ω —Ç–∞–π–ª–∞–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã Area2D –¥–ª—è –¥–≤–µ—Ä–µ–π (North, South, East, West)
- [ ] –î–≤–µ—Ä–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã Marker2D –¥–ª—è —Ç–æ—á–µ–∫ —Å–ø–∞–≤–Ω–∞
- [ ] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç RoomData —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ RoomArea (Area2D) –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å–≤–æ–π—Å—Ç–≤–∞ (room_type, connections –∏ —Ç.–¥.)
- [ ] –ö–æ–º–Ω–∞—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- [ ] –ö–æ–º–Ω–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ (`room_types/` –∏–ª–∏ `room_variants/`)

---

## üé® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –î–æ–±–∞–≤—å—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–ª—ã (–∫–∞–º–Ω–∏, —Å—Ç–æ–ª–±—ã)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Å–ª–æ–∏ TileMap –¥–ª—è –≥–ª—É–±–∏–Ω—ã
- –î–æ–±–∞–≤—å—Ç–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ (Light2D) –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Occluder2D** –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–Ω–∞—Ç
- –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **MultiMeshInstance2D** –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –û—Ç–ª–∞–¥–∫–∞:
- –î–æ–±–∞–≤—å—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –¥–≤–µ—Ä–µ–π (ColorRect)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–Ω–∞—Ç
- –î–æ–±–∞–≤—å—Ç–µ Label —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–º–Ω–∞—Ç–µ

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Godot 4.5 TileMap Documentation](https://docs.godotengine.org/en/4.5/classes/class_tilemap.html)
- [Godot 4.5 Scene Instancing](https://docs.godotengine.org/en/4.5/tutorials/scripting/instancing.html)
- [Godot 4.5 Area2D Documentation](https://docs.godotengine.org/en/4.5/classes/class_area2d.html)

